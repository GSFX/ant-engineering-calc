<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –†–µ–∞—Å—Ñ–∞–ª—å—Ç–ê–ù–¢</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: linear-gradient(to right, #e3f2fd, #539263);
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    h1 {
      font-size: 24px;
      text-align: center;
      color: #333;
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }
    button {
      margin: 30px auto 0;
      padding: 10px 30px;
      width: auto;
      display: block;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    .results {
      margin-top: 30px;
      background: #f1f8e9;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #c5e1a5;
    }
    .unit-label {
      font-size: 14px;
      color: #777;
      margin-top: 5px;
    }
    .optional {
      font-size: 13px;
      color: #999;
    }
    .lang-select {
      position: absolute;
      top: 20px;
      right: 20px;
    }
    .lang-select select {
      padding-left: 30px;
      background-position: 5px center;
      background-repeat: no-repeat;
    }
    .flag {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="lang-select">
      <select id="lang" onchange="changeLanguage()">
        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
        <option value="en">üá¨üáß English</option>
        <option value="es">üá™üá∏ Espa√±ol</option>
        <option value="az">üá¶üáø Az…ôrbaycan</option>
        <option value="sr">üá∑üá∏ Srpski</option>
      </select>
    </div>

    <h1 id="title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –†–µ–∞—Å—Ñ–∞–ª—å—Ç–ê–ù–¢</h1>

    <label id="massLabel">–ú–∞—Å—Å–∞ –ê–ì</label>
    <input type="number" id="mAG" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ">
    <select id="mAGUnit">
      <option value="kg">–∫–≥</option>
      <option value="t">—Ç–æ–Ω–Ω—ã</option>
    </select>
    <div class="unit-label" id="massUnit">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –º–∞—Å—Å—ã</div>

    <label id="rateLabel">–ù–æ—Ä–º–∞ —Ä–∞—Å—Ö–æ–¥–∞ –†–µ–∞—Å—Ñ–∞–ª—å—Ç–ê–ù–¢ (A), %</label>
    <input type="text" id="A" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, 0,01%">

    <label id="naturalMoisture">–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ê–ì (w0), %</label>
    <input type="text" id="w0" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, 1,5%">

    <label id="targetMoisture">–¢—Ä–µ–±—É–µ–º–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ê–ì (w1), %</label>
    <input type="text" id="w1" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, 7%">

    <label id="waterLabel">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã –≤ –µ–º–∫–æ—Å—Ç–∏ (VH2O) <span class="optional" id="optional">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></label>
    <input type="number" id="VH2O" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–±—ä—ë–º –≤–æ–¥—ã, –µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ">
    <select id="VH2OUnit">
      <option value="l">–ª–∏—Ç—Ä—ã</option>
      <option value="m3">–∫—É–±—ã (–º¬≥)</option>
    </select>
    <div class="unit-label" id="unitWater">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –æ–±—ä—ë–º–∞ –≤–æ–¥—ã</div>

    <button id="calculateBtnT" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

    <div class="results" id="results"></div>
  </div>

  <script>
    const translations = {
      ru: {
        title: "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –†–µ–∞—Å—Ñ–∞–ª—å—Ç–ê–ù–¢",
        massLabel: "–ú–∞—Å—Å–∞ –ê–ì",
        massUnit: "–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –º–∞—Å—Å—ã",
        rateLabel: "–ù–æ—Ä–º–∞ —Ä–∞—Å—Ö–æ–¥–∞ –†–µ–∞—Å—Ñ–∞–ª—å—Ç–ê–ù–¢ (A), %",
        naturalMoisture: "–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ê–ì (w0), %",
        targetMoisture: "–¢—Ä–µ–±—É–µ–º–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ê–ì (w1), %",
        waterLabel: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã –≤ –µ–º–∫–æ—Å—Ç–∏ (VH2O)",
        unitWater: "–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –æ–±—ä—ë–º–∞ –≤–æ–¥—ã",
        optional: "(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",
        calculateBtnT: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"
      },
      en: {
        title: "ReasphaltANT Calculator",
        massLabel: "Mass of AG",
        massUnit: "Mass unit",
        rateLabel: "ReasphaltANT Consumption Rate (A), %",
        naturalMoisture: "Natural moisture of AG (w0), %",
        targetMoisture: "Target moisture of AG (w1), %",
        waterLabel: "Water volume in tank (VH2O)",
        unitWater: "Water volume unit",
        optional: "(optional)",
        calculateBtnT: "Calculate"
      },
      es: {
        title: "Calculadora de ReasphaltANT",
        massLabel: "Masa de AG",
        massUnit: "Unidad de masa",
        rateLabel: "Tasa de consumo de ReasphaltANT (A), %",
        naturalMoisture: "Humedad natural de AG (w0), %",
        targetMoisture: "Humedad requerida de AG (w1), %",
        waterLabel: "Volumen de agua en el tanque (VH2O)",
        unitWater: "Unidad de volumen de agua",
        optional: "(opcional)",
        calculateBtnT: "Calcular"
      },
      az: {
        title: "ReasfaltANT Kalkulyatoru",
        massLabel: "AG k√ºtl…ôsi",
        massUnit: "K√ºtl…ô vahidi",
        rateLabel: "ReasfaltANT S…ôrf Normasƒ± (A), %",
        naturalMoisture: "AG-nin t…ôbii n…ômliliyi (w0), %",
        targetMoisture: "T…ôl…ôb olunan n…ômlilik (w1), %",
        waterLabel: "Su h…ôcmi (VH2O)",
        unitWater: "Su h…ôcmi vahidi",
        optional: "(isteƒüe baƒülƒ±)",
        calculateBtnT: "Hesabla"
      },
      sr: {
        title: "ReasfaltANT Kalkulator",
        massLabel: "Masa AG-a",
        massUnit: "Jedinica mase",
        rateLabel: "Norma potro≈°nje ReasfaltANT-a (A), %",
        naturalMoisture: "Prirodna vla≈ænost AG-a (w0), %",
        targetMoisture: "Zahtevana vla≈ænost AG-a (w1), %",
        waterLabel: "Zapremina vode u rezervoaru (VH2O)",
        unitWater: "Jedinica zapremine vode",
        optional: "(opciono)",
        calculateBtnT: "Izraƒçunaj"
      }
    };

    function changeLanguage() {
      const lang = document.getElementById('lang').value;
      const t = translations[lang];
      document.getElementById("title").innerText = t.title;
      document.getElementById("massLabel").innerText = t.massLabel;
      document.getElementById("massUnit").innerText = t.massUnit;
      document.getElementById("rateLabel").innerText = t.rateLabel;
      document.getElementById("naturalMoisture").innerText = t.naturalMoisture;
      document.getElementById("targetMoisture").innerText = t.targetMoisture;
      document.getElementById("waterLabel").innerText = t.waterLabel + ' ' + t.optional;
      document.getElementById("unitWater").innerText = t.unitWater;
      document.getElementById("optional").innerText = t.optional;
      document.getElementById("calculateBtnT").innerText = t.calculateBtnT;
    }

    window.onload = () => {
      const savedLang = localStorage.getItem('lang');
      if (savedLang) {
        document.getElementById('lang').value = savedLang;
        changeLanguage();
      }
    }

    document.getElementById('lang').addEventListener('change', () => {
      localStorage.setItem('lang', document.getElementById('lang').value);
    });

    function parsePercent(value) {
      if (!value) return 0;
      let clean = value.replace('%', '').replace(',', '.');
      if (clean === '0') clean = '0.0';
      return parseFloat(clean);
    }

    function calculate() {
      let mAG = parseFloat(document.getElementById('mAG').value);
      const unit = document.getElementById('mAGUnit').value;
      const A = parsePercent(document.getElementById('A').value);
      const w0 = parsePercent(document.getElementById('w0').value);
      const w1 = parsePercent(document.getElementById('w1').value);
      let VH2O = document.getElementById('VH2O').value;
      const VH2OUnit = document.getElementById('VH2OUnit').value;

      if (unit === 't') mAG *= 1000;
      if (VH2OUnit === 'm3') VH2O = parseFloat(VH2O) * 1000;
      else VH2O = parseFloat(VH2O);

      if (isNaN(mAG) || isNaN(A) || isNaN(w0) || isNaN(w1)) {
        document.getElementById('results').innerHTML = '<strong>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.</strong>';
        return;
      }

      const QANT = mAG * A * 0.01;
      const QH2O = mAG * (w1 - w0) * 0.01;
      const Kra = QH2O / QANT;

      let resultHTML = `
        <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞:</strong><br><br>
        –ú–∞—Å—Å–∞ –ê–ì: <strong>${mAG.toFixed(2)}</strong> –∫–≥<br>
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –†–µ–∞—Å—Ñ–∞–ª—å—Ç–ê–ù–¢ (QANT): <strong>${QANT.toFixed(2)}</strong> –ª<br>
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã (QH2O): <strong>${QH2O.toFixed(2)}</strong> –ª<br>
        –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Ç–≤–æ—Ä–µ–Ω–∏—è (K—Ä–∞—Å—Ç–≤): <strong>${Kra.toFixed(2)}</strong><br>
      `;

      if (!isNaN(VH2O)) {
        const VANT = VH2O / Kra;
        resultHTML += `–ù–æ—Ä–º–∞ –¥–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –†–µ–∞—Å—Ñ–∞–ª—å—Ç–ê–ù–¢ –Ω–∞ –æ–¥–Ω—É –µ–º–∫–æ—Å—Ç—å (VANT): <strong>${VANT.toFixed(2)}</strong> –ª`;
      } else {
        resultHTML += `<em>–í–≤–µ–¥–∏—Ç–µ –æ–±—ä—ë–º –µ–º–∫–æ—Å—Ç–∏ –≤–æ–¥—ã, —á—Ç–æ–±—ã —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–æ—Ä–º—É –¥–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è.</em>`;
      }

      document.getElementById('results').innerHTML = resultHTML;
    }

    document.querySelectorAll('input[type="text"]').forEach(input => {
      input.addEventListener('blur', () => {
        if (!input.value.includes('%')) {
          input.value = input.value + '%';
        }
        if (input.value === '0%') {
          input.value = '0,0%';
        }
      });
    });
  </script>
</body>
</html>